!function(){function n(n){return n&&n.__esModule?n.default:n}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l={},t={},a=e.parcelRequired7c6;null==a&&((a=function(n){if(n in l)return l[n].exports;if(n in t){var e=t[n];delete t[n];var a={id:n,exports:{}};return l[n]=a,e.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(n,e){t[n]=e},e.parcelRequired7c6=a),a("elFEq"),a("ei05g"),a("huAoy");var o=a("l5bVx"),i=n(a("WMajR")).template({1:function(e,l,t,a,i){var r,d=null!=l?l:e.nullContext||{},c=e.hooks.helperMissing,s="function",u=e.escapeExpression,p=e.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"        <img\n          src='https://image.tmdb.org/t/p/w500/"+u((void 0===(r=null!=(r=p(t,"poster_path")||(null!=l?p(l,"poster_path"):l))?r:c)?"undefined":n(o)(r))===s?r.call(d,{name:"poster_path",hash:{},data:i,loc:{start:{line:6,column:47},end:{line:6,column:62}}}):r)+"'\n          alt='"+u((void 0===(r=null!=(r=p(t,"title")||(null!=l?p(l,"title"):l))?r:c)?"undefined":n(o)(r))===s?r.call(d,{name:"title",hash:{},data:i,loc:{start:{line:7,column:15},end:{line:7,column:24}}}):r)+"'\n          class='movie-card__poster lazyload'\n          loading='lazy'\n        />\n"},3:function(n,e,l,t,a){var o,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"        <img\n          src='https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj'\n          alt='"+n.escapeExpression("function"==typeof(o=null!=(o=i(l,"title")||(null!=e?i(e,"title"):e))?o:n.hooks.helperMissing)?o.call(null!=e?e:n.nullContext||{},{name:"title",hash:{},data:a,loc:{start:{line:14,column:15},end:{line:14,column:24}}}):o)+"'\n          class='movie-card__poster'\n          loading='lazy'\n        />\n"},compiler:[8,">= 4.3.0"],main:function(e,l,t,a,i){var r,d,c=null!=l?l:e.nullContext||{},s=e.hooks.helperMissing,u="function",p=e.escapeExpression,m=e.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"<li class='movie-card__item' data-id='"+p((void 0===(d=null!=(d=m(t,"id")||(null!=l?m(l,"id"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"id",hash:{},data:i,loc:{start:{line:1,column:38},end:{line:1,column:44}}}):d)+"' id='open'>\n  <div class='movie-card'>\n    <div class='poster-wrapper'>\n"+(null!=(r=m(t,"if").call(c,null!=l?m(l,"poster_path"):l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:4,column:6},end:{line:18,column:13}}}))?r:"")+"    </div>\n    <div class='card-info'>\n      <h2 class='movie-info-title'> "+p((void 0===(d=null!=(d=m(t,"title")||(null!=l?m(l,"title"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"title",hash:{},data:i,loc:{start:{line:21,column:36},end:{line:21,column:45}}}):d)+"</h2>\n      <div class='info-wrapper'>\n        <div class='movie-icon-decor'>\n        </div>\n        <p class='info-item-year'>"+p((void 0===(d=null!=(d=m(t,"release_date")||(null!=l?m(l,"release_date"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"release_date",hash:{},data:i,loc:{start:{line:25,column:34},end:{line:25,column:50}}}):d)+"</p>\n        <p class='info-item-rating'><span class='rating-icon'>&#9733;</span>\n          "+p((void 0===(d=null!=(d=m(t,"vote_average")||(null!=l?m(l,"vote_average"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"vote_average",hash:{},data:i,loc:{start:{line:27,column:10},end:{line:27,column:26}}}):d)+"</p>\n      </div>\n    </div>\n  </div>\n  <div class='watched-delete-wrapper'>\n    <button class='watched-delete' type='button' id='close'></button>\n  </div>\n</li>"},useData:!0}),r=(o=a("l5bVx"),n(a("WMajR")).template({1:function(e,l,t,a,i){var r,d=null!=l?l:e.nullContext||{},c=e.hooks.helperMissing,s="function",u=e.escapeExpression,p=e.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"        <img\n          src='https://image.tmdb.org/t/p/w500/"+u((void 0===(r=null!=(r=p(t,"poster_path")||(null!=l?p(l,"poster_path"):l))?r:c)?"undefined":n(o)(r))===s?r.call(d,{name:"poster_path",hash:{},data:i,loc:{start:{line:6,column:47},end:{line:6,column:62}}}):r)+"'\n          alt='"+u((void 0===(r=null!=(r=p(t,"title")||(null!=l?p(l,"title"):l))?r:c)?"undefined":n(o)(r))===s?r.call(d,{name:"title",hash:{},data:i,loc:{start:{line:7,column:15},end:{line:7,column:24}}}):r)+"'\n          class='movie-card__poster lazyload'\n          loading='lazy'\n        />\n"},3:function(n,e,l,t,a){var o,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"        <img\n          src='https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj'\n          alt='"+n.escapeExpression("function"==typeof(o=null!=(o=i(l,"title")||(null!=e?i(e,"title"):e))?o:n.hooks.helperMissing)?o.call(null!=e?e:n.nullContext||{},{name:"title",hash:{},data:a,loc:{start:{line:14,column:15},end:{line:14,column:24}}}):o)+"'\n          class='movie-card__poster'\n          loading='lazy'\n        />\n"},compiler:[8,">= 4.3.0"],main:function(e,l,t,a,i){var r,d,c=null!=l?l:e.nullContext||{},s=e.hooks.helperMissing,u="function",p=e.escapeExpression,m=e.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"<li class='movie-card__item' data-id='"+p((void 0===(d=null!=(d=m(t,"id")||(null!=l?m(l,"id"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"id",hash:{},data:i,loc:{start:{line:1,column:38},end:{line:1,column:44}}}):d)+"' id='open'>\n  <div class='movie-card'>\n    <div class='poster-wrapper'>\n"+(null!=(r=m(t,"if").call(c,null!=l?m(l,"poster_path"):l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:4,column:6},end:{line:18,column:13}}}))?r:"")+"    </div>\n    <div class='card-info'>\n      <h2 class='movie-info-title'> "+p((void 0===(d=null!=(d=m(t,"title")||(null!=l?m(l,"title"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"title",hash:{},data:i,loc:{start:{line:21,column:36},end:{line:21,column:45}}}):d)+"</h2>\n      <div class='info-wrapper'>\n        <div class='movie-icon-decor'>\n        </div>\n        <p class='info-item-year'>"+p((void 0===(d=null!=(d=m(t,"release_date")||(null!=l?m(l,"release_date"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"release_date",hash:{},data:i,loc:{start:{line:25,column:34},end:{line:25,column:50}}}):d)+"</p>\n        <p class='info-item-rating'><span class='rating-icon'>&#9733;</span>\n          "+p((void 0===(d=null!=(d=m(t,"vote_average")||(null!=l?m(l,"vote_average"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"vote_average",hash:{},data:i,loc:{start:{line:27,column:10},end:{line:27,column:26}}}):d)+"</p>\n      </div>\n    </div>\n  </div>\n  <div class='watched-delete-wrapper'>\n    <button class='watched-delete' type='button' id='close'></button>\n  </div>\n</li>"},useData:!0}));a("3fu6U"),a("bRreI");var d=a("jYk2U"),c=a("bpxeT"),s=a("2TvXO"),u=a("2tA1L"),p=a("dyT35"),m=a("6JpON"),v=(o=a("l5bVx"),n(a("WMajR")).template({1:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"                            <span class='sub-genre'> "+n.escapeExpression(n.lambda(null!=e?o(e,"name"):e,e))+" </span>\n"},compiler:[8,">= 4.3.0"],main:function(e,l,t,a,i){var r,d,c=null!=l?l:e.nullContext||{},s=e.hooks.helperMissing,u="function",p=e.escapeExpression,m=e.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"<div class='modal'>\n    <div class='modal-wrapper'>\n        <div class='img-container'>\n            <img class='modal-img' src='https://image.tmdb.org/t/p/w500/"+p((void 0===(d=null!=(d=m(t,"poster_path")||(null!=l?m(l,"poster_path"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"poster_path",hash:{},data:i,loc:{start:{line:4,column:72},end:{line:4,column:87}}}):d)+"' alt='"+p((void 0===(d=null!=(d=m(t,"title")||(null!=l?m(l,"title"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"title",hash:{},data:i,loc:{start:{line:4,column:94},end:{line:4,column:103}}}):d)+"'\n                data-id='"+p((void 0===(d=null!=(d=m(t,"id")||(null!=l?m(l,"id"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"id",hash:{},data:i,loc:{start:{line:5,column:25},end:{line:5,column:31}}}):d)+"' />\n        </div>\n        <div class='modal-info'>\n            <h2 class='modal-title'>"+p((void 0===(d=null!=(d=m(t,"title")||(null!=l?m(l,"title"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"title",hash:{},data:i,loc:{start:{line:8,column:36},end:{line:8,column:45}}}):d)+'</h2>\n\n            <table class="modal-table">\n                <tbody>\n                    <tr>\n                        <th class="modal-table__descr">Vote/Votes</th>\n                        <td class="modal-table__value"><span class="modal-table__value-avr">'+p((void 0===(d=null!=(d=m(t,"vote_average")||(null!=l?m(l,"vote_average"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"vote_average",hash:{},data:i,loc:{start:{line:14,column:92},end:{line:14,column:108}}}):d)+'</span> / <span\n                            class="modal-table__vote-count">'+p((void 0===(d=null!=(d=m(t,"vote_count")||(null!=l?m(l,"vote_count"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"vote_count",hash:{},data:i,loc:{start:{line:15,column:60},end:{line:15,column:74}}}):d)+'</span></td>\n                    </tr>\n                    <tr>\n                        <th class="modal-table__descr">Popularity</th>\n                        <td class="modal-table__value">'+p((void 0===(d=null!=(d=m(t,"popularity")||(null!=l?m(l,"popularity"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"popularity",hash:{},data:i,loc:{start:{line:19,column:55},end:{line:19,column:69}}}):d)+'</td>\n                    </tr>\n                    <tr>\n                        <th class="modal-table__descr">Original Title</th>\n                        <td class="modal-table__value">'+p((void 0===(d=null!=(d=m(t,"original_title")||(null!=l?m(l,"original_title"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"original_title",hash:{},data:i,loc:{start:{line:23,column:55},end:{line:23,column:73}}}):d)+'</td>\n                    </tr>\n                    <tr>\n                        <th class="modal-table__descr">Genre</th>\n                        <td class="modal-table__value">\n'+(null!=(r=m(t,"each").call(c,null!=l?m(l,"genres"):l,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:28,column:28},end:{line:30,column:37}}}))?r:"")+"                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <p class='modal-review'>"+p((void 0===(d=null!=(d=m(t,"overview")||(null!=l?m(l,"overview"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"overview",hash:{},data:i,loc:{start:{line:35,column:36},end:{line:35,column:48}}}):d)+"</p>\n\n            <div class='modal-btn-wrapper'>\n                <button class='modal-btn__watched' type='button' data-id='"+p((void 0===(d=null!=(d=m(t,"id")||(null!=l?m(l,"id"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"id",hash:{},data:i,loc:{start:{line:38,column:74},end:{line:38,column:80}}}):d)+"' id='open'>Watched</button>\n\n            </div>\n        </div>\n    </div>\n</div>"},useData:!0})),h=a("b7riV"),f=new(0,u.ApiTheMovie);function _(){return(_=n(c)(n(s).mark((function e(l){var t;return n(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l.target!==l.currentTarget){n.next=2;break}return n.abrupt("return");case 2:t=l.target.closest(".movie-card__item").dataset.id,f.setMovieId(t),f.fetchById(t).then(g);case 5:case"end":return n.stop()}}),e)})))).apply(this,arguments)}function g(n){var e=v(n),l=p.create(e);l.show(),document.body.classList.add("stop-fon");var t=document.querySelector(".modal-btn__watched");t.textContent="remove from watched",t.addEventListener("click",(function(n){var e=(0,h.getWatchedList)(),t=n.target.dataset.id;if(e.find((function(n){return n.id===Number(t)}))){var a=(0,h.getWatchedList)();a=a.filter((function(n){return n.id!==Number(t)})),localStorage.setItem("watched-key",JSON.stringify(a)),m.Notify.warning("Фильм Удалён из библиотеки"),l.close()}y(),window.addEventListener("keydown",(function(n){"Escape"===n.code&&(l.close(),document.body.classList.remove("stop-fon"))})),document.querySelector(".basicLightbox").addEventListener("click",(function(){document.body.classList.remove("stop-fon")}))}))}var b=document.querySelector(".gallery");function y(){var n=function(){var n=JSON.parse(localStorage.getItem("watched-key"));if(n)return n}().map((function(n){return i(n)})).join("");b.innerHTML=n}function w(n){n.preventDefault();var e=function(){var n=JSON.parse(localStorage.getItem(d.QUEUE_KEY));if(console.log(n),n)return n}();console.log(e);var l=e.map((function(n){return r(n)})).join("");b.innerHTML=l}document.querySelector(".watched").addEventListener("click",y),document.querySelector(".gallery").addEventListener("click",(function(n){return _.apply(this,arguments)})),document.querySelector(".queue").addEventListener("click",w),a("2tA1L"),a("2H0Yv"),a("2Rvsa"),a("lHJrY"),a("9LQ4c"),a("7WJ1I");c=a("bpxeT"),s=a("2TvXO"),u=a("2tA1L"),p=a("dyT35"),m=a("6JpON"),o=a("l5bVx"),n(a("WMajR")).template({1:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"                            <span class='sub-genre'> "+n.escapeExpression(n.lambda(null!=e?o(e,"name"):e,e))+" </span>\n"},compiler:[8,">= 4.3.0"],main:function(e,l,t,a,i){var r,d,c=null!=l?l:e.nullContext||{},s=e.hooks.helperMissing,u="function",p=e.escapeExpression,m=e.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"<div class='modal'>\n    <div class='modal-wrapper'>\n        <div class='img-container'>\n            <img class='modal-img' src='https://image.tmdb.org/t/p/w500/"+p((void 0===(d=null!=(d=m(t,"poster_path")||(null!=l?m(l,"poster_path"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"poster_path",hash:{},data:i,loc:{start:{line:4,column:72},end:{line:4,column:87}}}):d)+"' alt='"+p((void 0===(d=null!=(d=m(t,"title")||(null!=l?m(l,"title"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"title",hash:{},data:i,loc:{start:{line:4,column:94},end:{line:4,column:103}}}):d)+"'\n                data-id='"+p((void 0===(d=null!=(d=m(t,"id")||(null!=l?m(l,"id"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"id",hash:{},data:i,loc:{start:{line:5,column:25},end:{line:5,column:31}}}):d)+"' />\n        </div>\n        <div class='modal-info'>\n            <h2 class='modal-title'>"+p((void 0===(d=null!=(d=m(t,"title")||(null!=l?m(l,"title"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"title",hash:{},data:i,loc:{start:{line:8,column:36},end:{line:8,column:45}}}):d)+'</h2>\n\n            <table class="modal-table">\n                <tbody>\n                    <tr>\n                        <th class="modal-table__descr">Vote/Votes</th>\n                        <td class="modal-table__value"><span class="modal-table__value-avr">'+p((void 0===(d=null!=(d=m(t,"vote_average")||(null!=l?m(l,"vote_average"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"vote_average",hash:{},data:i,loc:{start:{line:14,column:92},end:{line:14,column:108}}}):d)+'</span> /\n                            <span class="modal-table__vote-count">'+p((void 0===(d=null!=(d=m(t,"vote_count")||(null!=l?m(l,"vote_count"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"vote_count",hash:{},data:i,loc:{start:{line:15,column:66},end:{line:15,column:80}}}):d)+'</span></td>\n                    </tr>\n                    <tr>\n                        <th class="modal-table__descr">Popularity</th>\n                        <td class="modal-table__value">'+p((void 0===(d=null!=(d=m(t,"popularity")||(null!=l?m(l,"popularity"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"popularity",hash:{},data:i,loc:{start:{line:19,column:55},end:{line:19,column:69}}}):d)+'</td>\n                    </tr>\n                    <tr>\n                        <th class="modal-table__descr">Original Title</th>\n                        <td class="modal-table__value">'+p((void 0===(d=null!=(d=m(t,"original_title")||(null!=l?m(l,"original_title"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"original_title",hash:{},data:i,loc:{start:{line:23,column:55},end:{line:23,column:73}}}):d)+'</td>\n                    </tr>\n                    <tr>\n                        <th class="modal-table__descr">Genre</th>\n                        <td class="modal-table__value">\n'+(null!=(r=m(t,"each").call(c,null!=l?m(l,"genres"):l,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:28,column:28},end:{line:30,column:37}}}))?r:"")+"                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <p class='modal-review'>"+p((void 0===(d=null!=(d=m(t,"overview")||(null!=l?m(l,"overview"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"overview",hash:{},data:i,loc:{start:{line:35,column:36},end:{line:35,column:48}}}):d)+"</p>\n\n            <div class='modal-btn-wrapper'>\n                <button class='modal-btn__queue' type='button' data-id='"+p((void 0===(d=null!=(d=m(t,"id")||(null!=l?m(l,"id"):l))?d:s)?"undefined":n(o)(d))===u?d.call(c,{name:"id",hash:{},data:i,loc:{start:{line:38,column:72},end:{line:38,column:78}}}):d)+"' id='open'>Watched</button>\n\n            </div>\n        </div>\n    </div>\n</div>"},useData:!0}),d=a("jYk2U"),new(0,u.ApiTheMovie)}();
//# sourceMappingURL=library.96d898e8.js.map
