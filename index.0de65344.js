function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},l={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in l){var t=l[e];delete l[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){l[e]=t},t.parcelRequired7c6=o),o("fo3FY");const a=document.querySelector(".icon-open"),r=document.querySelector(".icon-close"),i=document.querySelector(".input-password");function s(){"password"===i.type?(i.type="text",a.classList.toggle("hide"),r.classList.toggle("hide")):(i.type="password",a.classList.toggle("hide"),r.classList.toggle("hide"))}a.addEventListener("click",s),r.addEventListener("click",s),o("erIBo"),o("e0Eue");var c=e(o("amrNH")).template({1:function(e,t,n,l,o){var a,r,i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <li class='movie-card__item' data-id='"+d(typeof(r=null!=(r=u(n,"id")||(null!=t?u(t,"id"):t))?r:s)===c?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:2,column:40},end:{line:2,column:46}}}):r)+"'>\n    <div class='poster-wrapper'>\n"+(null!=(a=u(n,"if").call(i,null!=t?u(t,"poster_path"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:4,column:6},end:{line:20,column:13}}}))?a:"")+"    </div>\n    <div class='card-info'>\n      <h2 class='movie-info-title'> "+d(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:s)===c?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:23,column:36},end:{line:23,column:45}}}):r)+"</h2>\n      <div class='info-wrapper'>\n        <p class='info-item-genre'>"+d(typeof(r=null!=(r=u(n,"genre_ids")||(null!=t?u(t,"genre_ids"):t))?r:s)===c?r.call(i,{name:"genre_ids",hash:{},data:o,loc:{start:{line:25,column:35},end:{line:25,column:48}}}):r)+"</p>\n        <p class='info-item-year'>"+d(typeof(r=null!=(r=u(n,"release_date")||(null!=t?u(t,"release_date"):t))?r:s)===c?r.call(i,{name:"release_date",hash:{},data:o,loc:{start:{line:26,column:34},end:{line:26,column:50}}}):r)+"</p>\n        <p class='info-item-rating'><span class='rating-icon'>&#9733;</span>\n          "+d(typeof(r=null!=(r=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?r:s)===c?r.call(i,{name:"vote_average",hash:{},data:o,loc:{start:{line:28,column:10},end:{line:28,column:26}}}):r)+"</p>\n      </div>\n    </div>\n  </li>\n"},2:function(e,t,n,l,o){var a,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,s="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <img\n          src='https://image.tmdb.org/t/p/w500/"+c(typeof(a=null!=(a=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?a:i)===s?a.call(r,{name:"poster_path",hash:{},data:o,loc:{start:{line:6,column:47},end:{line:6,column:62}}}):a)+"'\n          alt='"+c(typeof(a=null!=(a=d(n,"title")||(null!=t?d(t,"title"):t))?a:i)===s?a.call(r,{name:"title",hash:{},data:o,loc:{start:{line:7,column:15},end:{line:7,column:24}}}):a)+"'\n          class='movie-card__poster lazyload'\n          loading='lazy'\n          data-id='"+c(typeof(a=null!=(a=d(n,"id")||(null!=t?d(t,"id"):t))?a:i)===s?a.call(r,{name:"id",hash:{},data:o,loc:{start:{line:10,column:19},end:{line:10,column:25}}}):a)+"'\n        />\n"},4:function(e,t,n,l,o){var a,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,s="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <img\n          src='https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj'\n          alt='"+c(typeof(a=null!=(a=d(n,"title")||(null!=t?d(t,"title"):t))?a:i)===s?a.call(r,{name:"title",hash:{},data:o,loc:{start:{line:15,column:15},end:{line:15,column:24}}}):a)+"'\n          class='movie-card__poster'\n          loading='lazy'\n          data-id='"+c(typeof(a=null!=(a=d(n,"id")||(null!=t?d(t,"id"):t))?a:i)===s?a.call(r,{name:"id",hash:{},data:o,loc:{start:{line:18,column:19},end:{line:18,column:25}}}):a)+"'\n        />\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"results"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:32,column:9}}}))?a:""},useData:!0}),d=o("e0Eue"),u=o("7Y9D8"),m=o("b4iI4");m=o("b4iI4"),m=o("b4iI4");o("c1QDM"),o("3yZwQ");const p=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&(y.incrementPage(),y.genreId?y.fetchByGenre(this.genreId).then(m.makeValidatesGenreName).then(m.makeShortReleaseDate).then(f):y.searchValue?y.fetchBySearch(y.searchValue).then(m.makeValidatesGenreName).then(m.makeShortReleaseDate).then(f):y.fetchAllFilms().then(m.makeValidatesGenreName).then(m.makeShortReleaseDate).then(f))}))}),{root:null,rootMargin:"300px",threshold:1}),y=new(0,d.ApiTheMovie),h=document.querySelector(".gallery"),g=document.querySelector(".js-guard");function f(t){const n=c(t);h.insertAdjacentHTML("beforeend",n),n||e(u).Notify.warning("We're sorry, but you've reached the end of search results.")}y.fetchAllFilms(y.page).then(m.makeValidatesGenreName).then(m.makeShortReleaseDate).then(f),p.observe(g),(0,m.makeGenresList)(),o("h4WSp"),o("lXuvW");d=o("e0Eue");var v=e(o("amrNH")).template({1:function(e,t,n,l,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <span class='sub-genre'> "+e.escapeExpression(e.lambda(null!=t?a(t,"name"):t,t))+" </span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,o){var a,r,i=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,c="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='modal'>\n  <div class='modal-wrapper'>\n    <div class='img-container'>\n      <div class='img-container__trailer'>\n        <img\n          class='modal-img'\n          src='https://image.tmdb.org/t/p/w500/"+d(typeof(r=null!=(r=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?r:s)===c?r.call(i,{name:"poster_path",hash:{},data:o,loc:{start:{line:7,column:47},end:{line:7,column:62}}}):r)+"'\n          alt='"+d(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:s)===c?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:8,column:15},end:{line:8,column:24}}}):r)+"'\n          data-id='"+d(typeof(r=null!=(r=u(n,"id")||(null!=t?u(t,"id"):t))?r:s)===c?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:9,column:19},end:{line:9,column:25}}}):r)+"'\n        />\n        <div class='img-overlay__trailer'>\n          <span class='play__span'></span>\n        </div>\n      </div>\n      <button type='button' class='modal-btn__trailer'> Watch trailer</button>\n    </div>\n\n    <div class='modal-info'>\n      <h2 class='modal-title'>"+d(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:s)===c?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:19,column:30},end:{line:19,column:39}}}):r)+"</h2>\n\n      <table class='modal-table'>\n        <tbody>\n          <tr class='modal-table__string'>\n            <th class='modal-table__descr'>Vote/Votes</th>\n            <td class='modal-table__value'><span\n                class='modal-table__value-avr'\n              >"+d(typeof(r=null!=(r=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?r:s)===c?r.call(i,{name:"vote_average",hash:{},data:o,loc:{start:{line:27,column:15},end:{line:27,column:31}}}):r)+"</span>\n              /\n              <span class='modal-table__vote-count'>"+d(typeof(r=null!=(r=u(n,"vote_count")||(null!=t?u(t,"vote_count"):t))?r:s)===c?r.call(i,{name:"vote_count",hash:{},data:o,loc:{start:{line:29,column:52},end:{line:29,column:66}}}):r)+"</span></td>\n          </tr>\n          <tr class='modal-table__string'>\n            <th class='modal-table__descr'>Popularity</th>\n            <td class='modal-table__value'>"+d(typeof(r=null!=(r=u(n,"popularity")||(null!=t?u(t,"popularity"):t))?r:s)===c?r.call(i,{name:"popularity",hash:{},data:o,loc:{start:{line:33,column:43},end:{line:33,column:57}}}):r)+"</td>\n          </tr>\n          <tr class='modal-table__string'>\n            <th class='modal-table__descr'>Original Title</th>\n            <td class='modal-table__value'>"+d(typeof(r=null!=(r=u(n,"original_title")||(null!=t?u(t,"original_title"):t))?r:s)===c?r.call(i,{name:"original_title",hash:{},data:o,loc:{start:{line:37,column:43},end:{line:37,column:61}}}):r)+"</td>\n          </tr>\n          <tr class='modal-table__string'>\n            <th class='modal-table__descr'>Genre</th>\n            <td class='modal-table__value'>\n"+(null!=(a=u(n,"each").call(i,null!=t?u(t,"genres"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:42,column:14},end:{line:44,column:23}}}))?a:"")+"            </td>\n          </tr>\n        </tbody>\n      </table>\n      <h2 class='modal-review__title'>About</h2>\n      <p class='modal-review'>"+d(typeof(r=null!=(r=u(n,"overview")||(null!=t?u(t,"overview"):t))?r:s)===c?r.call(i,{name:"overview",hash:{},data:o,loc:{start:{line:50,column:30},end:{line:50,column:42}}}):r)+"</p>\n\n      <div class='modal-btn-wrapper'>\n        <button\n          class='modal-btn__watched'\n          type='button'\n          data-id='"+d(typeof(r=null!=(r=u(n,"id")||(null!=t?u(t,"id"):t))?r:s)===c?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:56,column:19},end:{line:56,column:25}}}):r)+"'\n          id='open'\n        >Add to Watched</button>\n\n        <button\n          class='modal-btn__queue'\n          type='button'\n          data-id='"+d(typeof(r=null!=(r=u(n,"id")||(null!=t?u(t,"id"):t))?r:s)===c?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:63,column:19},end:{line:63,column:25}}}):r)+"'\n          id='open'\n        >Add to Queue</button>\n\n        <button class='modal-btn__close' type='button'></button>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0}),_=o("9B8F0");d=o("e0Eue"),u=o("7Y9D8");const b=new(0,d.ApiTheMovie);function S(){const e=JSON.parse(localStorage.getItem("watched-key"));if(e)return e}function w(e){let t=S();const n=e.target.dataset.id;if(t.find((e=>e.id===Number(n)))){document.querySelector(".modal-btn__watched").textContent="Add to watched";let e=S();e=e.filter((e=>e.id!==Number(n))),localStorage.setItem("watched-key",JSON.stringify(e)),u.Notify.warning("Фильм Удалён из библиотеки")}else{document.querySelector(".modal-btn__watched").textContent="remove from watch";let e=S();localStorage.setItem("watched-key",JSON.stringify(e)),b.setMovieId(n),b.fetchById(n).then(k),u.Notify.success("Фильм добавлен в библиотеку")}}function k({poster_path:e,id:t,title:n,vote_average:l,vote_count:o,popularity:a,original_title:r,genres:i,overview:s,release_date:c}){const d=JSON.parse(localStorage.getItem("watched-key"));localStorage.setItem("watched-key",JSON.stringify([...d,{poster_path:e,id:t,title:n,vote_average:l,vote_count:o,popularity:a,original_title:r,genres:i,overview:s,release_date:c}]))}JSON.parse(localStorage.getItem("watched-key"))||localStorage.setItem("watched-key",JSON.stringify([]));d=o("e0Eue"),u=o("7Y9D8");const O=new(0,d.ApiTheMovie);function x(){const e=JSON.parse(localStorage.getItem("queue-key"));if(e)return e}function I(e){let t=x();const n=e.target.dataset.id;if(t.find((e=>e.id===Number(n)))){document.querySelector(".modal-btn__queue").textContent="Add to queue";let e=x();e=e.filter((e=>e.id!==Number(n))),localStorage.setItem("queue-key",JSON.stringify(e)),u.Notify.warning("Фильм Удалён из библиотеки")}else{document.querySelector(".modal-btn__queue").textContent="remove from queue";let e=x();localStorage.setItem("queue-key",JSON.stringify(e)),O.setMovieId(n),O.fetchById(n).then(P),u.Notify.success("Фильм добавлен в библиотеку")}}function P({poster_path:e,id:t,title:n,vote_average:l,vote_count:o,popularity:a,original_title:r,genres:i,overview:s,release_date:c}){const d=JSON.parse(localStorage.getItem("queue-key"));localStorage.setItem("queue-key",JSON.stringify([...d,{poster_path:e,id:t,title:n,vote_average:l,vote_count:o,popularity:a,original_title:r,genres:i,overview:s,release_date:c}]))}JSON.parse(localStorage.getItem("queue-key"))||localStorage.setItem("queue-key",JSON.stringify([]));var q=o("6BFKp"),N=(m=o("b4iI4"),o("ksLB7"));const T=new(0,d.ApiTheMovie),L=document.querySelector(".gallery");function E(e){(0,m.makeShortVoteAndPopularity)(e);const t=v(e),n=_.create(t);n.show(),document.body.classList.add("stop-fon");let l=function(){const e=JSON.parse(localStorage.getItem("watched-key"));if(e)return e}();const o=document.querySelector(".modal-btn__watched");l.find((t=>t.id===e.id))?o.textContent="Remove from watched":o.textContent="Add to watched";let a=x();const r=document.querySelector(".modal-btn__queue");a.find((t=>t.id===e.id))?r.textContent="Remove from Queue":r.textContent="Add to Queue",window.addEventListener("keydown",(function(e){"Escape"!==e.code||q.instanceTrailer.visible()||((0,N.preloaderSetTimeOut)(),n.close(),document.body.classList.remove("stop-fon"))}));document.querySelector(".basicLightbox").addEventListener("click",(function(){(0,N.preloaderSetTimeOut)(),document.body.classList.remove("stop-fon")}));document.querySelector(".modal-btn__close").addEventListener("click",(function(){(0,N.preloaderSetTimeOut)(),n.close(),document.body.classList.remove("stop-fon")})),o.addEventListener("click",w),r.addEventListener("click",I),(0,q.searchTrailer)()}L.addEventListener("click",(function(e){if((0,N.preloaderSetTimeOut)(),e.target===e.currentTarget)return;const t=e.target.closest(".movie-card__item").dataset.id;T.setMovieId(t),T.fetchById(t).then(E)}));m=o("b4iI4"),m=o("b4iI4"),N=o("ksLB7");const A=document.querySelector(".genre-list"),B=document.querySelector(".gallery");function D(e){const t=c(e);B.innerHTML=t}A.addEventListener("click",(function(e){if((0,N.preloaderSetTimeOut)(),e.currentTarget===e.target)return;y.resetPage(),y.genreId=e.target.dataset.id,y.fetchByGenre(y.genreId).then(m.makeValidatesGenreName).then(m.makeShortReleaseDate).then(D)}));document.querySelector(".genres-button").addEventListener("click",(function(){(0,N.preloaderSetTimeOut)(),C(M,400)}));const M=document.querySelector("#genres");let C=(e,t=500)=>"none"===window.getComputedStyle(e).display?((e,t=500)=>{e.style.removeProperty("display");let n=window.getComputedStyle(e).display;"none"===n&&(n="block"),e.style.display=n;let l=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=l+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)})(e,t):((e,t=500)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)})(e,t);o("cSlVY"),o("1OOAY"),o("8H5RI"),o("ksLB7"),o("lwn1R"),o("6BFKp"),o("c1QDM"),o("3yZwQ");u=o("7Y9D8"),m=o("b4iI4"),m=o("b4iI4"),N=o("ksLB7");const F=document.querySelector(".header-form"),J=document.querySelector(".js-search"),R=document.querySelector(".gallery"),V=document.querySelector(".header-input");function j(e){if(0==e.total_results)return J.style.color="#FF001B",J.style.textAlign="center",J.style.marginBottom="10px",J.removeAttribute("hidden"),void setTimeout((()=>{J.setAttribute("hidden","")}),3e3);const t=c(e);R.innerHTML=t}F.addEventListener("submit",(function(t){if(t.preventDefault(),(0,N.preloaderSetTimeOut)(),y.searchValue=V.value.trim(),!y.searchValue)return e(u).Notify.info("Enter the name movie"),J.style.color="#FF001B",J.style.textAlign="center",J.style.marginBottom="10px",J.removeAttribute("hidden"),void setTimeout((()=>{J.setAttribute("hidden","")}),3e3);y.resetPage(),y.fetchBySearch(y.searchValue).then(m.makeValidatesGenreName).then(m.makeShortReleaseDate).then(j),F.elements.searchQuery.value=""})),o("b4iI4");
//# sourceMappingURL=index.0de65344.js.map
