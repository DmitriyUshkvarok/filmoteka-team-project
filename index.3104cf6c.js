!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},l={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in l){var t=l[e];delete l[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){l[e]=t},t.parcelRequired7c6=a),a("elFEq");var o=document.querySelector(".icon-open"),r=document.querySelector(".icon-close"),i=document.querySelector(".input-password");function s(){"password"===i.type?(i.type="text",o.classList.toggle("hide"),r.classList.toggle("hide")):(i.type="password",o.classList.toggle("hide"),r.classList.toggle("hide"))}o.addEventListener("click",s),r.addEventListener("click",s),a("gdX7X"),a("2tA1L");var d=a("l5bVx"),c=e(a("WMajR")).template({1:function(t,n,l,a,o){var r,i,s=null!=n?n:t.nullContext||{},c=t.hooks.helperMissing,u="function",m=t.escapeExpression,p=t.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <li class='movie-card__item' data-id='"+m((void 0===(i=null!=(i=p(l,"id")||(null!=n?p(n,"id"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:2,column:40},end:{line:2,column:46}}}):i)+"'>\n    <div class='poster-wrapper'>\n"+(null!=(r=p(l,"if").call(s,null!=n?p(n,"poster_path"):n,{name:"if",hash:{},fn:t.program(2,o,0),inverse:t.program(4,o,0),data:o,loc:{start:{line:4,column:6},end:{line:20,column:13}}}))?r:"")+"    </div>\n    <div class='card-info'>\n      <h2 class='movie-info-title'> "+m((void 0===(i=null!=(i=p(l,"title")||(null!=n?p(n,"title"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"title",hash:{},data:o,loc:{start:{line:23,column:36},end:{line:23,column:45}}}):i)+"</h2>\n      <div class='info-wrapper'>\n        <p class='info-item-genre'>"+m((void 0===(i=null!=(i=p(l,"genre_ids")||(null!=n?p(n,"genre_ids"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"genre_ids",hash:{},data:o,loc:{start:{line:25,column:35},end:{line:25,column:48}}}):i)+"</p>\n        <p class='info-item-year'>"+m((void 0===(i=null!=(i=p(l,"release_date")||(null!=n?p(n,"release_date"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"release_date",hash:{},data:o,loc:{start:{line:26,column:34},end:{line:26,column:50}}}):i)+"</p>\n        <p class='info-item-rating'><span class='rating-icon'>&#9733;</span>\n          "+m((void 0===(i=null!=(i=p(l,"vote_average")||(null!=n?p(n,"vote_average"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"vote_average",hash:{},data:o,loc:{start:{line:28,column:10},end:{line:28,column:26}}}):i)+"</p>\n      </div>\n    </div>\n  </li>\n"},2:function(t,n,l,a,o){var r,i=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,c="function",u=t.escapeExpression,m=t.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <img\n          src='https://image.tmdb.org/t/p/w500/"+u((void 0===(r=null!=(r=m(l,"poster_path")||(null!=n?m(n,"poster_path"):n))?r:s)?"undefined":e(d)(r))===c?r.call(i,{name:"poster_path",hash:{},data:o,loc:{start:{line:6,column:47},end:{line:6,column:62}}}):r)+"'\n          alt='"+u((void 0===(r=null!=(r=m(l,"title")||(null!=n?m(n,"title"):n))?r:s)?"undefined":e(d)(r))===c?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:7,column:15},end:{line:7,column:24}}}):r)+"'\n          class='movie-card__poster lazyload'\n          loading='lazy'\n          data-id='"+u((void 0===(r=null!=(r=m(l,"id")||(null!=n?m(n,"id"):n))?r:s)?"undefined":e(d)(r))===c?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:10,column:19},end:{line:10,column:25}}}):r)+"'\n        />\n"},4:function(t,n,l,a,o){var r,i=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,c="function",u=t.escapeExpression,m=t.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <img\n          src='https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj'\n          alt='"+u((void 0===(r=null!=(r=m(l,"title")||(null!=n?m(n,"title"):n))?r:s)?"undefined":e(d)(r))===c?r.call(i,{name:"title",hash:{},data:o,loc:{start:{line:15,column:15},end:{line:15,column:24}}}):r)+"'\n          class='movie-card__poster'\n          loading='lazy'\n          data-id='"+u((void 0===(r=null!=(r=m(l,"id")||(null!=n?m(n,"id"):n))?r:s)?"undefined":e(d)(r))===c?r.call(i,{name:"id",hash:{},data:o,loc:{start:{line:18,column:19},end:{line:18,column:25}}}):r)+"'\n        />\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(n,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"results"):t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:32,column:9}}}))?o:""},useData:!0}),u=a("2tA1L"),m=a("6JpON"),p=a("kSvvz");p=a("kSvvz"),p=a("kSvvz");a("3fu6U"),a("bRreI");var v=new IntersectionObserver((function(e){var t=this;e.forEach((function(e){e.isIntersecting&&(h.incrementPage(),h.genreId?h.fetchByGenre(t.genreId).then(p.makeValidatesGenreName).then(p.makeShortReleaseDate).then(g):h.searchValue?h.fetchBySearch(h.searchValue).then(p.makeValidatesGenreName).then(p.makeShortReleaseDate).then(g):h.fetchAllFilms().then(p.makeValidatesGenreName).then(p.makeShortReleaseDate).then(g))}))}),{root:null,rootMargin:"300px",threshold:1}),h=new(0,u.ApiTheMovie),y=document.querySelector(".gallery"),f=document.querySelector(".js-guard");function g(t){var n=c(t);y.insertAdjacentHTML("beforeend",n),n||e(m).Notify.warning("We're sorry, but you've reached the end of search results.")}h.fetchAllFilms(h.page).then(p.makeValidatesGenreName).then(p.makeShortReleaseDate).then(g),v.observe(f),(0,p.makeGenresList)(),a("ei05g"),a("huAoy");u=a("2tA1L"),d=a("l5bVx");var _=e(a("WMajR")).template({1:function(e,t,n,l,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <span class='sub-genre'> "+e.escapeExpression(e.lambda(null!=t?o(t,"name"):t,t))+" </span>\n"},compiler:[8,">= 4.3.0"],main:function(t,n,l,a,o){var r,i,s=null!=n?n:t.nullContext||{},c=t.hooks.helperMissing,u="function",m=t.escapeExpression,p=t.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='modal'>\n  <div class='modal-wrapper'>\n    <div class='img-container'>\n      <div class='img-container__trailer'>\n        <img\n          class='modal-img'\n          src='https://image.tmdb.org/t/p/w500/"+m((void 0===(i=null!=(i=p(l,"poster_path")||(null!=n?p(n,"poster_path"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"poster_path",hash:{},data:o,loc:{start:{line:7,column:47},end:{line:7,column:62}}}):i)+"'\n          alt='"+m((void 0===(i=null!=(i=p(l,"title")||(null!=n?p(n,"title"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"title",hash:{},data:o,loc:{start:{line:8,column:15},end:{line:8,column:24}}}):i)+"'\n          data-id='"+m((void 0===(i=null!=(i=p(l,"id")||(null!=n?p(n,"id"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:9,column:19},end:{line:9,column:25}}}):i)+"'\n        />\n        <div class='img-overlay__trailer'>\n          <span class='play__span'></span>\n        </div>\n      </div>\n      <button type='button' class='modal-btn__trailer'> Watch trailer</button>\n    </div>\n\n    <div class='modal-info'>\n      <h2 class='modal-title'>"+m((void 0===(i=null!=(i=p(l,"title")||(null!=n?p(n,"title"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"title",hash:{},data:o,loc:{start:{line:19,column:30},end:{line:19,column:39}}}):i)+"</h2>\n\n      <table class='modal-table'>\n        <tbody>\n          <tr class='modal-table__string'>\n            <th class='modal-table__descr'>Vote/Votes</th>\n            <td class='modal-table__value'><span\n                class='modal-table__value-avr'\n              >"+m((void 0===(i=null!=(i=p(l,"vote_average")||(null!=n?p(n,"vote_average"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"vote_average",hash:{},data:o,loc:{start:{line:27,column:15},end:{line:27,column:31}}}):i)+"</span>\n              /\n              <span class='modal-table__vote-count'>"+m((void 0===(i=null!=(i=p(l,"vote_count")||(null!=n?p(n,"vote_count"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"vote_count",hash:{},data:o,loc:{start:{line:29,column:52},end:{line:29,column:66}}}):i)+"</span></td>\n          </tr>\n          <tr class='modal-table__string'>\n            <th class='modal-table__descr'>Popularity</th>\n            <td class='modal-table__value'>"+m((void 0===(i=null!=(i=p(l,"popularity")||(null!=n?p(n,"popularity"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"popularity",hash:{},data:o,loc:{start:{line:33,column:43},end:{line:33,column:57}}}):i)+"</td>\n          </tr>\n          <tr class='modal-table__string'>\n            <th class='modal-table__descr'>Original Title</th>\n            <td class='modal-table__value'>"+m((void 0===(i=null!=(i=p(l,"original_title")||(null!=n?p(n,"original_title"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"original_title",hash:{},data:o,loc:{start:{line:37,column:43},end:{line:37,column:61}}}):i)+"</td>\n          </tr>\n          <tr class='modal-table__string'>\n            <th class='modal-table__descr'>Genre</th>\n            <td class='modal-table__value'>\n"+(null!=(r=p(l,"each").call(s,null!=n?p(n,"genres"):n,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:42,column:14},end:{line:44,column:23}}}))?r:"")+"            </td>\n          </tr>\n        </tbody>\n      </table>\n      <h2 class='modal-review__title'>About</h2>\n      <p class='modal-review'>"+m((void 0===(i=null!=(i=p(l,"overview")||(null!=n?p(n,"overview"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"overview",hash:{},data:o,loc:{start:{line:50,column:30},end:{line:50,column:42}}}):i)+"</p>\n\n      <div class='modal-btn-wrapper'>\n        <button\n          class='modal-btn__watched'\n          type='button'\n          data-id='"+m((void 0===(i=null!=(i=p(l,"id")||(null!=n?p(n,"id"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:56,column:19},end:{line:56,column:25}}}):i)+"'\n          id='open'\n        >Add to Watched</button>\n\n        <button\n          class='modal-btn__queue'\n          type='button'\n          data-id='"+m((void 0===(i=null!=(i=p(l,"id")||(null!=n?p(n,"id"):n))?i:c)?"undefined":e(d)(i))===u?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:63,column:19},end:{line:63,column:25}}}):i)+"'\n          id='open'\n        >Add to Queue</button>\n\n        <button class='modal-btn__close' type='button'></button>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0}),b=a("dyT35"),S=a("8nrFW"),w=(u=a("2tA1L"),m=a("6JpON"),"watched-key"),k=new(0,u.ApiTheMovie);function O(){var e=JSON.parse(localStorage.getItem(w));if(e)return e}function x(e){var t=O(),n=e.target.dataset.id;if(t.find((function(e){return e.id===Number(n)}))){document.querySelector(".modal-btn__watched").textContent="Add to watched";var l=O();l=l.filter((function(e){return e.id!==Number(n)})),localStorage.setItem(w,JSON.stringify(l)),m.Notify.warning("Фильм Удалён из библиотеки")}else{document.querySelector(".modal-btn__watched").textContent="remove from watch";var a=O();localStorage.setItem(w,JSON.stringify(a)),k.setMovieId(n),k.fetchById(n).then(P),m.Notify.success("Фильм добавлен в библиотеку")}}function P(t){var n=t.poster_path,l=t.id,a=t.title,o=t.vote_average,r=t.vote_count,i=t.popularity,s=t.original_title,d=t.genres,c=t.overview,u=t.release_date,m=JSON.parse(localStorage.getItem(w));localStorage.setItem(w,JSON.stringify(e(S)(m).concat([{poster_path:n,id:l,title:a,vote_average:o,vote_count:r,popularity:i,original_title:s,genres:d,overview:c,release_date:u}])))}JSON.parse(localStorage.getItem(w))||localStorage.setItem(w,JSON.stringify([]));S=a("8nrFW"),u=a("2tA1L"),m=a("6JpON");var N="queue-key",L=new(0,u.ApiTheMovie);function q(){var e=JSON.parse(localStorage.getItem(N));if(e)return e}function T(e){var t=q(),n=e.target.dataset.id;if(t.find((function(e){return e.id===Number(n)}))){document.querySelector(".modal-btn__queue").textContent="Add to queue";var l=q();l=l.filter((function(e){return e.id!==Number(n)})),localStorage.setItem(N,JSON.stringify(l)),m.Notify.warning("Фильм Удалён из библиотеки")}else{document.querySelector(".modal-btn__queue").textContent="remove from queue";var a=q();localStorage.setItem(N,JSON.stringify(a)),L.setMovieId(n),L.fetchById(n).then(I),m.Notify.success("Фильм добавлен в библиотеку")}}function I(t){var n=t.poster_path,l=t.id,a=t.title,o=t.vote_average,r=t.vote_count,i=t.popularity,s=t.original_title,d=t.genres,c=t.overview,u=t.release_date,m=JSON.parse(localStorage.getItem(N));localStorage.setItem(N,JSON.stringify(e(S)(m).concat([{poster_path:n,id:l,title:a,vote_average:o,vote_count:r,popularity:i,original_title:s,genres:d,overview:c,release_date:u}])))}JSON.parse(localStorage.getItem(N))||localStorage.setItem(N,JSON.stringify([]));var A=a("i0dsC"),E=(p=a("kSvvz"),a("9LQ4c")),J=new(0,u.ApiTheMovie),M=document.querySelector(".gallery");function R(e){(0,p.makeShortVoteAndPopularity)(e);var t=_(e),n=b.create(t);n.show(),document.body.classList.add("stop-fon");var l=function(){var e=JSON.parse(localStorage.getItem("watched-key"));if(e)return e}(),a=document.querySelector(".modal-btn__watched");l.find((function(t){return t.id===e.id}))?a.textContent="Remove from watched":a.textContent="Add to watched";var o=q(),r=document.querySelector(".modal-btn__queue");o.find((function(t){return t.id===e.id}))?r.textContent="Remove from Queue":r.textContent="Add to Queue",window.addEventListener("keydown",(function(e){"Escape"!==e.code||A.instanceTrailer.visible()||((0,E.preloaderSetTimeOut)(),n.close(),document.body.classList.remove("stop-fon"))})),document.querySelector(".basicLightbox").addEventListener("click",(function(){(0,E.preloaderSetTimeOut)(),document.body.classList.remove("stop-fon")})),document.querySelector(".modal-btn__close").addEventListener("click",(function(){(0,E.preloaderSetTimeOut)(),n.close(),document.body.classList.remove("stop-fon")})),a.addEventListener("click",x),r.addEventListener("click",T),(0,A.searchTrailer)()}M.addEventListener("click",(function(e){if((0,E.preloaderSetTimeOut)(),e.target===e.currentTarget)return;var t=e.target.closest(".movie-card__item").dataset.id;J.setMovieId(t),J.fetchById(t).then(R)}));p=a("kSvvz"),p=a("kSvvz"),E=a("9LQ4c");var C=document.querySelector(".genre-list"),V=document.querySelector(".gallery");function z(e){var t=c(e);V.innerHTML=t}C.addEventListener("click",(function(e){if((0,E.preloaderSetTimeOut)(),e.currentTarget===e.target)return;h.resetPage(),h.genreId=e.target.dataset.id,h.fetchByGenre(h.genreId).then(p.makeValidatesGenreName).then(p.makeShortReleaseDate).then(z)})),document.querySelector(".genres-button").addEventListener("click",(function(){(0,E.preloaderSetTimeOut)(),j(D,400)}));var D=document.querySelector("#genres");var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var n=window.getComputedStyle(e).display;"none"===n&&(n="block"),e.style.display=n;var l=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=l+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return"none"===window.getComputedStyle(e).display?F(e,t):B(e,t)};a("2H0Yv"),a("2Rvsa"),a("lHJrY"),a("9LQ4c"),a("7WJ1I"),a("i0dsC"),a("3fu6U"),a("bRreI");m=a("6JpON"),p=a("kSvvz"),p=a("kSvvz"),E=a("9LQ4c");var G=document.querySelector(".header-form"),H=document.querySelector(".js-search"),Q=document.querySelector(".gallery"),W=document.querySelector(".header-input");function U(e){if(0==e.total_results)return H.style.color="#FF001B",H.style.textAlign="center",H.style.marginBottom="10px",H.removeAttribute("hidden"),void setTimeout((function(){H.setAttribute("hidden","")}),3e3);var t=c(e);Q.innerHTML=t}G.addEventListener("submit",(function(t){if(t.preventDefault(),(0,E.preloaderSetTimeOut)(),h.searchValue=W.value.trim(),!h.searchValue)return e(m).Notify.info("Enter the name movie"),H.style.color="#FF001B",H.style.textAlign="center",H.style.marginBottom="10px",H.removeAttribute("hidden"),void setTimeout((function(){H.setAttribute("hidden","")}),3e3);h.resetPage(),h.fetchBySearch(h.searchValue).then(p.makeValidatesGenreName).then(p.makeShortReleaseDate).then(U),G.elements.searchQuery.value=""})),a("kSvvz")}();
//# sourceMappingURL=index.3104cf6c.js.map
